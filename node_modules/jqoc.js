
function JQOC($){

  function createImage(url, className){
      var newImg = $('<img class="' + className + '">');
      newImg.attr('src', url);
      return newImg;
  }

  function createFadedBg(){
    return $('<div class="fadebg"></div>');
  }

  function createCheckbox(name, text){
    return $('<input type="checkbox" id="'+name+'" name="'+name+'" value="'+name+'"> <label for="'+name+'"><span></span>'+text+'</label>');
  }

  function createSettingsWindow(options, dimensions){
    var settingsWindow = $('<div class="settingsDiv popup"></div>');
    settingsWindow.append(createCheckbox('loadnsfw', 'Load nsfw wallpapers'));
    settingsWindow.find('#loadnsfw').prop('checked', options.loadnsfw);
    settingsWindow.append($('<br/>'));
    settingsWindow.append(createCheckbox('alldims', 'Accept all image dimensions'));
    settingsWindow.find('#loadnsfw').prop('checked', dimensions.indexOf('all') > -1);
    settingsWindow.append($('<br/>'));
    settingsWindow.append($('<br/>'));
    settingsWindow.append($('<hr/>'));
    settingsWindow.append($('<p>Subreddits included in image download: </p>'));
    var newList = $('<ul class="subredditList"></ul>')
    for(var i = 0; i < options['subredditlist'].length; i++){
      newList.append($('<li>' + options['subredditlist'][i] + '</li>'));
    }
    newList.append($('<li class="addNewSubreddit"> + add new</li>'));
    settingsWindow.append(newList);
    settingsWindow.append($('<br/>'));
    settingsWindow.append($('<br/>'));
    settingsWindow.append($('<hr/>'));
    settingsWindow.append($('<input style="display:none;" id="fileDialog" type="file" nwdirectory />'));
    settingsWindow.append($('<span class="saveLocation">'+ options['savelocation'] +'</span>'));
    settingsWindow.append($('<br/>'));
    settingsWindow.append($('<br/>'));
    settingsWindow.append($('<hr/>'));
    settingsWindow.append($('<button class="settingsButton" id="apply">Apply</button>'));
    settingsWindow.append($('<button class="settingsButton" id="cancel">Cancel</button>'));
    return settingsWindow;
  }

  this.createFadedBg = createFadedBg;
  this.createSettingsWindow = createSettingsWindow;
  this.createImage = createImage;
}

module.exports = function($){
  return new JQOC($);
}
