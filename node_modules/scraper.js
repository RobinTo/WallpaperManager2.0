var req = require('request');
var fs = require('fs');

function Scraper(){

  function getJson(subreddit, callback){
    req('http://www.reddit.com/r/' +subreddit+ '.json', function(error, response, body){
      if(!error && response.statusCode == 200){
        callback(body);
      }
    });
  }

  function getImg(url, filename, callback){
    req(url).pipe(fs.createWriteStream(filename)).on('close', function(){
      callback(filename);
    });
  }
  this.getJson = getJson;
  this.getImg = getImg;
}

module.exports = new Scraper;
